# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Butch Filename Substring Remover

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —É—Ç–∏–ª–∏—Ç—É –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å —É–¥–∞–ª–µ–Ω–∏–µ–º —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–æ–¥—Å—Ç—Ä–æ–∫ –∏–∑ –∏—Ö –∏–º—ë–Ω.

## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫ (utils.py:2-9)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `utils.py:7-9`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
def remove_substrings(s: str, to_remove: set[str]) -> str:
    for substring in to_remove:
        if s.lower().startswith(substring.lower()):
            s = s.lower().replace(substring.lower(), "", 1)
    return s
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
1. **–ü–æ—Ç–µ—Ä—è —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤**: –°—Ç—Ä–æ–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä (`s = s.lower()`), —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—Ç–µ—Ä–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤—Å–µ–≥–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
   - –ü—Ä–∏–º–µ—Ä: `TestFile.txt` ‚Üí `testfile.txt` –≤–º–µ—Å—Ç–æ `TestFile.txt`
   - –ü—Ä–∏–º–µ—Ä: `MyDocument_temp.pdf` ‚Üí `mydocument.pdf` –≤–º–µ—Å—Ç–æ `MyDocument.pdf`

2. **–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞—è –ª–æ–≥–∏–∫–∞**: –§—É–Ω–∫—Ü–∏—è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `startswith` (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ —Å –ø–æ–¥—Å—Ç—Ä–æ–∫–∏), –Ω–æ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `replace`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –ø–æ–¥—Å—Ç—Ä–æ–∫—É –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Å—Ç—Ä–æ–∫–∏. –≠—Ç–æ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

3. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –Ω–∞—á–∞–ª–æ —Å—Ç—Ä–æ–∫–∏**: –ü—Ä–æ–≤–µ—Ä–∫–∞ `startswith` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–∞ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –æ–Ω–∞ –≤ –Ω–∞—á–∞–ª–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞, –Ω–æ –Ω–µ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –∏–ª–∏ –∫–æ–Ω—Ü–µ.
   - –ü—Ä–∏–º–µ—Ä: –§–∞–π–ª `document_test.txt` –Ω–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É–¥–∞–ª–∏—Ç—å `test`, —Ç–∞–∫ –∫–∞–∫ `test` –Ω–µ –≤ –Ω–∞—á–∞–ª–µ

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ vs –†–µ–∞–ª—å–Ω–æ–µ:**
- **–û–∂–∏–¥–∞–µ—Ç—Å—è**: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞ –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞
- **–†–µ–∞–ª—å–Ω–æ**: –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–¥—Å—Ç—Ä–æ–∫–∞ –≤ –Ω–∞—á–∞–ª–µ + –ø–æ—Ç–µ—Ä—è —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤—Å–µ–≥–æ –∏–º–µ–Ω–∏

### 2. ‚ùå –°–ï–†–¨–Å–ó–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤–æ –≤—Ä–µ–º—è –æ–±—Ö–æ–¥–∞ (rename.py:6-60)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename.py:42-60`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
for dirpath, dirnames, filenames in os.walk(root_dir):
    # ...
    for dirname in dirnames:
        # ...
        os.rename(os.path.join(dirpath, dirname), os.path.join(dirpath, new_name))
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫:**
`os.walk()` —Å—Ç—Ä–æ–∏—Ç –¥–µ—Ä–µ–≤–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–æ –Ω–∞—á–∞–ª–∞ –∏—Ç–µ—Ä–∞—Ü–∏–∏. –ï—Å–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è –æ–±—Ö–æ–¥–∞, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫:
- **–û—à–∏–±–∫–∞–º "FileNotFoundError"**: –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø–æ —Å—Ç–∞—Ä–æ–º—É –ø—É—Ç–∏
- **–ü—Ä–æ–ø—É—Å–∫—É –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**: os.walk –º–æ–∂–µ—Ç –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é**: –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–†–µ—à–µ–Ω–∏–µ:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–Ω–∞—á–∞–ª–∞, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ø–æ –≥–ª—É–±–∏–Ω–µ (–æ—Ç —Å–∞–º—ã—Ö –≥–ª—É–±–æ–∫–∏—Ö –∫ –∫–æ—Ä–Ω–µ–≤—ã–º), –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å.

### 3. ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º—ë–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∏ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞ –ø–æ–ª—É—á–∞—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∏–º—è, –≤—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π.

**–ü—Ä–∏–º–µ—Ä:**
```
test_document.txt
test_document_copy.txt
```
–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ `_copy` –æ–±–∞ —Ñ–∞–π–ª–∞ –ø–æ–ø—ã—Ç–∞—é—Ç—Å—è —Å—Ç–∞—Ç—å `test_document.txt`, —á—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö (–æ–¥–∏–Ω –∏–∑ —Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω)
- –û—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 4. ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –ü—É—Å—Ç—ã–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ (rename.py:27-30, 47-50)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename.py:27-30`, `rename.py:47-50`

**–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ, –Ω–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:**
```python
if new_name == "":
    print(f"\nError renaming file '{filename}' to '{new_name}': Empty filename", file=sys.stderr)
    all_errors.append(f"\nError renaming file '{filename}' to '{new_name}': Empty filename")
    continue
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –∏–º—è –µ—Å—Ç—å, –Ω–æ —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞:
- –ò–º–µ–Ω–∞ —Å–æ—Å—Ç–æ—è—â–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–æ–±–µ–ª–æ–≤
- –ò–º–µ–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ç–æ–ª—å–∫–æ —Ç–æ—á–∫–∏ (`.`, `..`)
- –ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤

## –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 5. üìä –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (rename.py:16-20)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename.py:16-20`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
for dirpath, dirnames, filenames in os.walk(root_dir):
    line = f'Processing: {dirpath}'
    current_length = len(line)
    max_length = max(max_length, current_length)
    print(f'\r{line}{" " * (max_length - current_length)}', end='\n')
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ö–∞–∂–¥–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É (`end='\n'`), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `\r` –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º
- –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤—ã–≤–æ–¥ –±—É–¥–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–º
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 6. üîÑ –ü–†–û–ë–õ–ï–ú–ê: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ (rename.py:31-40, 52-60)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename.py:31-40` –∏ `rename.py:52-60`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ò–¥–µ–Ω—Ç–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–¥–∞
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤–Ω–æ—Å–∏—Ç—å –≤ –¥–≤–∞ –º–µ—Å—Ç–∞)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `rename_item(old_path, new_path, item_type)`

### 7. üìù –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (–≤—Å–µ —Ñ–∞–π–ª—ã)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `print()`.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∞
- –°–ª–æ–∂–Ω–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∞—Ç—å –ª–æ–≥ –≤ —Ñ–∞–π–ª –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å `logging` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º–∏ —É—Ä–æ–≤–Ω—è–º–∏

### 8. üß™ –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í –ø—Ä–æ–µ–∫—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç unit-—Ç–µ—Å—Ç—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –±–∞–≥–æ–≤

## –ú–∞–ª—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è

### 9. üìñ –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ docstring –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `rename_files_and_dirs`
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –ù–µ—Ç –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–¥–µ
- README –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è—Ö –∏ –ø–æ–¥–≤–æ–¥–Ω—ã—Ö –∫–∞–º–Ω—è—Ö

### 10. üîí –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–ø–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (rename_directory.py:14-17)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename_directory.py:14-17`

**–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ:**
```python
system_dirs = ["/", "/bin", "/boot", "/dev", "/etc", "/lib", "/lib64", "/proc", "/root", "/sbin", "/sys", "/usr", "/var"]
if os.path.abspath(root_directory) in system_dirs:
    raise ValueError("It is not safe to run this script in system directories.")
```

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/etc/config` –ø—Ä–æ–π–¥—ë—Ç –ø—Ä–æ–≤–µ—Ä–∫—É)
- –¢–æ–ª—å–∫–æ Linux/Unix –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –Ω–µ—Ç –∑–∞—â–∏—Ç—ã –¥–ª—è Windows (`C:\Windows`, `C:\Program Files`)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 11. ‚öôÔ∏è –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∂–∏–º–∞ "dry-run"

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –≤–Ω–µ—Å–µ–Ω—ã, –±–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

### 12. üéØ –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø—Ü–∏–∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö–Ω–∏–º —É—Ä–æ–≤–Ω–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏).

### 13. üíæ –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–∫–∞—Ç–∞ (undo)

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –Ω–µ—Ç —Å–ø–æ—Å–æ–±–∞ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è—Ç—å mapping —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö –∏–º—ë–Ω –≤ JSON —Ñ–∞–π–ª

### 14. üîç –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (rename.py:37-40, 57-60)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename.py:37-40`, `rename.py:57-60`

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
except Exception as e:
    print(f"Error type: {type(e)}")
    print(f"\nError renaming file '{filename}' to '{new_name}': {e}", file=sys.stderr)
```

–û—Ç–ª–æ–≤ –≤—Å–µ—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π (`Exception`) ‚Äî –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞, —Ç–∞–∫ –∫–∞–∫ —Å–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏.

### 15. üåç –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–¥–∏—Ä–æ–≤–æ–∫ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ö–æ–¥ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–∞–º–∏ –∏–º—ë–Ω —Ñ–∞–π–ª–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –û–°.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 16. üèóÔ∏è –ü–†–û–ë–õ–ï–ú–ê: –°–ª–∞–±–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:**
–§—É–Ω–∫—Ü–∏—è `rename_files_and_dirs` –¥–µ–ª–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ:
- –û–±—Ö–æ–¥–∏—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –∏ –ø–∞–ø–∫–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—ã–≤–æ–¥
- –°–æ–±–∏—Ä–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —á—ë—Ç–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é

### 17. üì¶ –ü–†–û–ë–õ–ï–ú–ê: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É, –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### 18. üîÑ –ü–†–û–ë–õ–ï–ú–ê: –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è set‚Üílist (rename_directory.py:20)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `rename_directory.py:20`

```python
rename_files_and_dirs(root_directory, set(substrings_to_remove))
```

–°–ø–∏—Å–æ–∫ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ set, —Ö–æ—Ç—è –º–æ–∂–Ω–æ –±—ã–ª–æ —Å—Ä–∞–∑—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å–ø–∏—Å–∫–æ–º –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç.

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 19. ‚ö° –ü–†–û–ë–õ–ï–ú–ê: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–∂–Ω–∏–º —Ä–µ–≥–∏—Å—Ç—Ä–æ–º

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `utils.py:7-8`

```python
if s.lower().startswith(substring.lower()):
    s = s.lower().replace(substring.lower(), "", 1)
```

–í—ã–∑–æ–≤ `s.lower()` –∏ `substring.lower()` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ —Å—Ç—Ä–æ–∫–∏.

## –†–µ–∑—é–º–µ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º:
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: 4
- **–°–µ—Ä—å—ë–∑–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: 3
- **–°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: 7
- **–ú–∞–ª—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**: 5

### –°–∞–º—ã–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. ‚ùå **–ü–æ—Ç–µ—Ä—è —Ä–µ–≥–∏—Å—Ç—Ä–∞ —Å–∏–º–≤–æ–ª–æ–≤** –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `remove_substrings` (utils.py:7-9)
2. ‚ùå **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –≤–æ –≤—Ä–µ–º—è –æ–±—Ö–æ–¥–∞** (rename.py:42-60)
3. ‚ö†Ô∏è **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º—ë–Ω**

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:

**–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ):**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É `remove_substrings` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–Ω–∏–∑—É –≤–≤–µ—Ä—Ö)
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º—ë–Ω

**–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º "dry-run"
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã

**–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
- –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–∫–∞—Ç–∞
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –ª—É—á—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ—Ä—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ—Ç–µ—Ä—è —Ä–µ–≥–∏—Å—Ç—Ä–∞
```
–í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:
  MyDocument_test.pdf
  TestFile_old.txt

–ö–æ–º–∞–Ω–¥–∞: butch-rename /path test old

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
  MyDocument_.pdf
  File_.txt

–†–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
  mydocument_.pdf  ‚ùå (–ø–æ—Ç–µ—Ä—è–Ω —Ä–µ–≥–∏—Å—Ç—Ä)
  testfile_.txt    ‚ùå (–ø–æ—Ç–µ—Ä—è–Ω —Ä–µ–≥–∏—Å—Ç—Ä)
```

### –ü—Ä–∏–º–µ—Ä 2: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ startswith
```
–í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:
  document_test.txt
  file_old_version.txt

–ö–æ–º–∞–Ω–¥–∞: butch-rename /path test old

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
  document_.txt
  file__version.txt

–†–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
  document_test.txt  ‚ùå (–Ω–µ –∏–∑–º–µ–Ω—ë–Ω, —Ç.–∫. test –Ω–µ –≤ –Ω–∞—á–∞–ª–µ)
  file_old_version.txt  ‚ùå (–Ω–µ –∏–∑–º–µ–Ω—ë–Ω, —Ç.–∫. old –Ω–µ –≤ –Ω–∞—á–∞–ª–µ)
```

### –ü—Ä–∏–º–µ—Ä 3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω
```
–í—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã:
  report.txt
  report_old.txt

–ö–æ–º–∞–Ω–¥–∞: butch-rename /path _old

–†–µ–∑—É–ª—å—Ç–∞—Ç:
  –û—à–∏–±–∫–∞: –æ–±–∞ —Ñ–∞–π–ª–∞ –ø—ã—Ç–∞—é—Ç—Å—è —Å—Ç–∞—Ç—å report.txt
```
